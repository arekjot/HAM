<div class="menu">
  <a href="#aboutme" onclick="navigate(event,'aboutme.html')">About Me</a>
  <a href="#gallery" onclick="navigate(event,'gallery.html')">Gallery</a>
  <a href="#propagation_guide" onclick="navigate(event,'propagation_guide.html')">Propagation Guide</a>
  <a href="#projects" onclick="navigate(event,'projects.html')">Projects</a>
  <a href="#links" onclick="navigate(event,'links.html')">Links</a>
</div>

<script>
function navigate(event, page){
  event.preventDefault();
  if(page === 'propagation_guide.html'){
    document.getElementById('main-content').innerHTML = `<iframe src="${page}" title="HF Propagation Guide"></iframe>`;
  } else {
    fetch(page)
      .then(resp=>resp.text())
      .then(data=>{ document.getElementById('main-content').innerHTML = data; })
      .catch(()=>{ document.getElementById('main-content').innerHTML="<p>Error loading page.</p>"; });
  }
  // ustaw poprawny hash bez spacji
  const hash = event.target.getAttribute('href');
  window.location.hash = hash;
}

function loadFromHash(){
  const hash = window.location.hash || '#aboutme';
  switch(hash){
    case '#gallery': navigate(new Event('click'), 'gallery.html'); break;
    case '#propagation_guide': navigate(new Event('click'), 'propagation_guide.html'); break;
    case '#projects': navigate(new Event('click'), 'projects.html'); break;
    case '#links': navigate(new Event('click'), 'links.html'); break;
    default: navigate(new Event('click'), 'aboutme.html'); break;
  }
}

window.addEventListener('load', loadFromHash);
window.addEventListener('hashchange', loadFromHash);
</script>
